<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>RPHS</title>
</head>
<body>
  <div>MYSQL DATA</div>
  <div id="myData" style="width:600px;height:500px;border:1px solid black;">
    
  </div>
</body>
<script src="js/axios.min.js" type="text/javascript"></script>

<script>
  var DB_STOCK=[];

  function get_db_stock(){
    alert('Ready Axios');
    DB_STOCK=[];
    const options = {      
      headers: { 'content-type': 'application/x-www-form-urlencoded' }
    };

    const xopt = {
      "Content-Type": "application/x-www-form-urlencoded",
      Accept: "application/json"
    }

    //axios.post('http://localhost/rphs/z_stock.php', { request: 0 }, xopt )     
    
    axios.post('http:updesk.heliohost.org/z_stock.php', { request: 0 }, xopt )    
    .then(function (response) { 
      console.log(response.data); DB_STOCK = response.data; dispData(); 
    })    
    .catch(function (error) { console.log(error); });
  }

  function get_db_stock2(){    
    alert('Ready xmlhttp');
    DB_STOCK=[];
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {						
        //document.getElementById("mnu4").innerHTML=xmlhttp.responseText;			
        var arr = this.responseText;        
        alert(arr);
        DB_STOCK = JSON.parse(arr);       
        dispData();
      }
    };    
    xmlhttp.open("POST", "http:updesk.heliohost.org/z_stock.php",true);  
    xmlhttp.send();  
  }

  function dispData(){
    var aryDB=DB_STOCK;
    var dtl='';
    for(var i=0;i<aryDB.length;i++){
      dtl+=
        '<div style="width:100%;height:20px;margin-top:5px;">'+aryDB[i]['stockno']+'</div>';
    }
    document.getElementById('myData').innerHTML=dtl;
  }
  
  get_db_stock2();
</script>
</html>
